<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>How I Perform Backups | Bruno Blog</title>
<meta name="keywords" content="Homelab">
<meta name="description" content="Index

Introduction
Targets &amp; Destinations
Rsync
Prometheus &amp; Grafana
Golang
The Tool

Introduction
Backups are like insurance policies for your digital life. They&rsquo;re copies of your important files, stored in a safe place separate from your original data. Just as you wouldn&rsquo;t want to risk losing everything in a fire without insurance, you don&rsquo;t want to risk losing your precious photos, documents, or other files without backups.
In this blog post, I&rsquo;ll share my personal insights and strategies for maintaining comprehensive backups, ensuring that no vital information slips through the cracks while also staying organized amidst the constant flux of data changes.">
<meta name="author" content="">
<link rel="canonical" href="http://localhost:1313/posts/2024-04-12-how-i-perform-backups/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css" integrity="sha256-j&#43;ECM6cGvIfy4Is8&#43;XuL1MCoDxBnWhQ2ddWSEhIQN8A=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/2024-04-12-how-i-perform-backups/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Bruno Blog (Alt + H)">Bruno Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/posts/" title="Posts">
                    <span>Posts</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/about/" title="About">
                    <span>About</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      How I Perform Backups
    </h1>
    <div class="post-meta"><span title='2024-04-12 00:00:00 +0000 UTC'>April 12, 2024</span>&nbsp;·&nbsp;3 min

</div>
  </header> 
  <div class="post-content"><h2 id="index">Index<a hidden class="anchor" aria-hidden="true" href="#index">#</a></h2>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#targets-&amp;-destinations">Targets &amp; Destinations</a></li>
<li><a href="#rsync">Rsync</a></li>
<li><a href="#prometheus-&amp;-grafana">Prometheus &amp; Grafana</a></li>
<li><a href="#golang">Golang</a></li>
<li><a href="#the-tool">The Tool</a></li>
</ul>
<h1 id="introduction">Introduction<a hidden class="anchor" aria-hidden="true" href="#introduction">#</a></h1>
<p>Backups are like insurance policies for your digital life. They&rsquo;re copies of your important files, stored in a safe place separate from your original data. Just as you wouldn&rsquo;t want to risk losing everything in a fire without insurance, you don&rsquo;t want to risk losing your precious photos, documents, or other files without backups.</p>
<p>In this blog post, I&rsquo;ll share my personal insights and strategies for maintaining comprehensive backups, ensuring that no vital information slips through the cracks while also staying organized amidst the constant flux of data changes.</p>
<h1 id="targets--destinations">Targets &amp; Destinations<a hidden class="anchor" aria-hidden="true" href="#targets--destinations">#</a></h1>
<p>Before diving into the backup process, it&rsquo;s essential to define two key elements: the targets (backup sources) and the backup destinations.</p>
<p>Targets encompass the data we deem critical for backup. This could include documents, photos, videos, and any other files essential to our digital lives. By identifying these targets, we ensure that no vital information is overlooked during the backup process.</p>
<p>Next, we determine where we want to store these backups, our backup destinations. This could involve a combination of options such as cloud storage services like Google Drive or Dropbox, external hard drives, network-attached storage (NAS) devices, or even dedicated backup servers. Each option offers its advantages in terms of accessibility, redundancy, and security.</p>
<p>In my use case I backup all files from my work laptop, <a href="https://github.com/gokrazy/gokrazy">gokrazy databases</a> and important data within LXC containers on Proxmox. This way, if there&rsquo;s a system failure, I can rebuild everything and upload the files for a quick recovery.</p>
<h1 id="rsync">Rsync<a hidden class="anchor" aria-hidden="true" href="#rsync">#</a></h1>
<p>With targets and destinations set, it&rsquo;s time to select the backup method. Rsync emerges as a formidable choice, boasting efficient file synchronization capabilities. Its ability to perform incremental backups minimizes data transfer, making it ideal for handling large files and slow network connections.</p>
<h1 id="prometheus--grafana">Prometheus &amp; Grafana<a hidden class="anchor" aria-hidden="true" href="#prometheus--grafana">#</a></h1>
<p>Ensuring the integrity of our backup process requires meticulous inspection of file changes within specific date ranges, alongside gathering insightful metrics. To accomplish this, I&rsquo;ve opted for Prometheus and Grafana, renowned for their robust monitoring and visualization capabilities.</p>
<h1 id="golang">Golang<a hidden class="anchor" aria-hidden="true" href="#golang">#</a></h1>
<p>Golang&rsquo;s asynchronous processing capabilities make it the perfect companion for integrating data with Prometheus, ensuring seamless operation and performance optimization.</p>
<h1 id="the-finale">The Finale<a hidden class="anchor" aria-hidden="true" href="#the-finale">#</a></h1>
<p>Enter <a href="https://github.com/BrunoTeixeira1996/gbackup">gbackup</a>, the culmination of these efforts. This tool orchestrates the backup plan, covering essential partitions, databases, and files across various locations, ensuring data resilience.</p>
<p>The current backup plan is the following:</p>
<ul>
<li>gokrazy perm partion (resides in gokrazy)</li>
<li>gokrazy data folder (resides in a LXC in proxmox)</li>
<li>postgresql databases (resides in a LXC in proxmox)
<ul>
<li>currently I am only doing the backup for the waiw and leak databases</li>
</ul>
</li>
<li>syncthing folder (resides in a LXC in proxmox)</li>
<li>monitoring files (resides in a LXC in proxmox
<ul>
<li>this is files from alertmanager, prometheus, grafana and pushgateway</li>
</ul>
</li>
<li>work laptop</li>
</ul>
<p>For the backup locations, I utilize two distinct setups. Firstly, an external hard drive directly connected to Proxmox serves as one backup destination. Secondly, I employ an internal hard drive within the Proxmox environment as a secondary backup location. This dual setup ensures redundancy and reliability in safeguarding critical data.</p>
<figure class="post-image">
    <img loading="lazy" src="/gbackup/arc.png"/> 
</figure>

<figure class="post-image">
    <img loading="lazy" src="/gbackup/graph.png"/> 
</figure>



  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/homelab/">Homelab</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">Bruno Blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
